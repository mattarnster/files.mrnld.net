<div class="buttons">
    <a href="/my-files" class="button my-files-button">My files</a>
    <form action="/logout" method="POST" class="form-logout">
        <input type="hidden" name="_csrf" value="{{csrfToken}}" />
        <input type="submit" value="Logout">
    </form>
</div>
<form action="/upload" method="post" enctype="multipart/form-data" class="dropzone" id="dropzone-form">
    <input type="file" name="file" id="file" hidden>
    <input type="hidden" name="_csrf" value="{{csrfToken}}">
</form>
<div class="uploaded-files">

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.7.2/min/dropzone.min.js"
    integrity="sha512-9WciDs0XP20sojTJ9E7mChDXy6pcO0qHpwbEJID1YVavz2H6QBz5eLoDD8lseZOb2yGT8xDNIV7HIe1ZbuiDWg=="
    crossorigin="anonymous"></script>
<script>
    Dropzone.options.dropzoneForm = {
        success: function (file, response) {
            console.log(response)
            let uploadedFilesDiv = document.querySelector('.uploaded-files');
            let newFileUploadDiv = document.createElement('div')
            newFileUploadDiv.className = "upload"
            let newFileUpload = document.createElement('p')
            newFileUpload.textContent = file.name
            let newFileUploadLink = document.createElement('a')
            newFileUploadLink.href = "http://" + window.location.host + "/download/" + response.data.uploadId
            newFileUploadLink.text = "http://" + window.location.host + "/download/" + response.data.uploadId
            newFileUploadDiv.appendChild(newFileUpload)
            newFileUploadDiv.appendChild(newFileUploadLink)
            uploadedFilesDiv.appendChild(newFileUploadDiv)
        }
    }
</script>